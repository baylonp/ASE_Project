{
  "openapi": "3.0.0",
  "info": {
    "title": "Gacha Collection Project - The Dubliners",
    "description": "Specifiche API del progetto divise per microservizi.",
    "version": "1.0.0"
  },
  "externalDocs": {
    "description": "GitHub project repository",
    "url": "https://github.com/baylonp/ASE_Project"
  },
  "servers": [
    {
      "url": "http://127.0.0.1:5001"
    },
    {
      "url": "http://127.0.0.1:5002"
    },
    {
      "url": "http://127.0.0.1:5003"
    },
    {
      "url": "http://127.0.0.1:5004"
    }
  ],
  "tags": [
    {
      "name": "Authentication Service",
      "description": "Account management",
      "externalDocs": {
        "description": "GitHub repo",
        "url": "https://github.com/baylonp/ASE_Project/tree/test/gachas/authentication"
      }
    },
    {
      "name": "Gacha Service",
      "description": "Gacha management",
      "externalDocs": {
        "description": "GitHub repo",
        "url": "https://github.com/baylonp/ASE_Project/tree/test/gachas/gacha_service"
      }
    },
    {
      "name": "Gacha Market Service",
      "description": "Market management",
      "externalDocs": {
        "description": "GitHub repo",
        "url": "https://github.com/baylonp/ASE_Project/tree/test/gachas/gacha_market_service"
      }
    },
    {
      "name": "Gacha Auction Service",
      "description": "Auction management",
      "externalDocs": {
        "description": "GitHub repo",
        "url": "https://github.com/baylonp/ASE_Project/tree/test/gachas/auction_service"
      }
    }
  ],
  "paths": {
    "/authentication/account": {
      "post": {
        "tags": [
          "Authentication Service"
        ],
        "summary": "Create a new account",
        "description": "Registers a new user in the system. The user must provide a valid username, password, and email.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "username": {
                    "type": "string",
                    "description": "A unique username",
                    "example": "user123"
                  },
                  "password": {
                    "type": "string",
                    "description": "The user's password",
                    "example": "password123"
                  },
                  "email": {
                    "type": "string",
                    "description": "A valid email address",
                    "example": "user123@example.com"
                  }
                },
                "required": [
                  "username",
                  "password",
                  "email"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Account created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Account created successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input or username/email already in use",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": {
                        "invalidInput": {
                          "value": "Invalid input data"
                        },
                        "usernameExists": {
                          "value": "Username already exists"
                        },
                        "emailExists": {
                          "value": "Email already exists"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Authentication Service"
        ],
        "summary": "Delete an account",
        "description": "Deletes a user account based on the provided account ID.",
        "parameters": [
          {
            "name": "accountId",
            "in": "query",
            "required": true,
            "description": "The unique ID of the account to be deleted.",
            "schema": {
              "type": "integer",
              "example": 1
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Account deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Account deleted successfully"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Account not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Account not found"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Authentication Service"
        ],
        "summary": "Update an account",
        "description": "Updates the details of a user account, such as username, password, or email, based on the provided account ID.",
        "parameters": [
          {
            "name": "accountId",
            "in": "query",
            "required": true,
            "description": "The unique ID of the account to be updated.",
            "schema": {
              "type": "integer",
              "example": 1
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "username": {
                    "type": "string",
                    "description": "New username for the account (must be unique).",
                    "example": "new_user123"
                  },
                  "password": {
                    "type": "string",
                    "description": "New password for the account.",
                    "example": "new_password123"
                  },
                  "email": {
                    "type": "string",
                    "description": "New email address for the account (must be unique).",
                    "example": "new_user123@example.com"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Account updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Account updated successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data or duplicate username/email",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": {
                        "missingId": {
                          "value": "Account ID is required"
                        },
                        "invalidInput": {
                          "value": "Invalid input data"
                        },
                        "usernameExists": {
                          "value": "Username already exists"
                        },
                        "emailExists": {
                          "value": "Email already exists"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Account not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Account not found"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/authentication/auth": {
      "post": {
        "tags": [
          "Authentication Service"
        ],
        "summary": "User login",
        "description": "Authenticates a user using their username and password. If successful, returns a session ID.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "username": {
                    "type": "string",
                    "description": "The username of the account.",
                    "example": "user123"
                  },
                  "password": {
                    "type": "string",
                    "description": "The password of the account.",
                    "example": "password123"
                  }
                },
                "required": [
                  "username",
                  "password"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Login successful"
                    },
                    "sessionId": {
                      "type": "string",
                      "description": "A unique session ID for the user.",
                      "example": "896534823985732659"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Invalid input data"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Invalid credentials"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Authentication Service"
        ],
        "summary": "User logout",
        "description": "Logout from the Gacha System using the sessionId",
        "parameters": [
          {
            "name": "sessionId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Logout successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Logout successful"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Invalid input data"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Session not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Session not found"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/authentication/userId": {
      "get": {
        "tags": [
          "Authentication Service"
        ],
        "summary": "Get user ID",
        "description": "Retrieves the user ID based on the provided username.",
        "parameters": [
          {
            "name": "username",
            "in": "query",
            "required": true,
            "description": "The username of the user whose ID is being requested.",
            "schema": {
              "type": "string",
              "example": "user123"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User ID retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "userId": {
                      "type": "integer",
                      "description": "The unique ID of the user.",
                      "example": 42
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Username not provided",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Username is required"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "User not found"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/authentication/players/{playerId}": {
      "get": {
        "tags": [
          "Authentication Service"
        ],
        "summary": "Get user information",
        "description": "Retrieves detailed information about a player based on their unique player ID.",
        "parameters": [
          {
            "name": "playerId",
            "in": "path",
            "required": true,
            "description": "The unique ID of the player.",
            "schema": {
              "type": "integer",
              "example": 1
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Player information retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "integer",
                      "description": "The unique ID of the player.",
                      "example": 1
                    },
                    "username": {
                      "type": "string",
                      "description": "The username of the player.",
                      "example": "player123"
                    },
                    "email": {
                      "type": "string",
                      "description": "The email address of the player.",
                      "example": "player123@example.com"
                    },
                    "password": {
                      "type": "string",
                      "description": "The hashed password of the player.",
                      "example": "$2b$12$12345hashedpassword"
                    },
                    "wallet": {
                      "type": "integer",
                      "description": "The current wallet balance of the player.",
                      "example": 500
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Player not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Player not found"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Internal server error"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/authentication/players/{playerId}/currency/add": {
      "post": {
        "tags": [
          "Authentication Service"
        ],
        "summary": "Add currency to player wallet",
        "description": "Adds a specified amount of in-game currency to the wallet of a player identified by their player ID.",
        "parameters": [
          {
            "name": "playerId",
            "in": "path",
            "required": true,
            "description": "The unique ID of the player.",
            "schema": {
              "type": "integer",
              "example": 1
            }
          },
          {
            "name": "amount",
            "in": "query",
            "required": true,
            "description": "The amount of currency to add to the player's wallet. Must be greater than zero.",
            "schema": {
              "type": "number",
              "format": "float",
              "example": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Currency added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Currency added successfully"
                    },
                    "new_wallet_balance": {
                      "type": "integer",
                      "description": "The updated wallet balance of the player.",
                      "example": 150
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data or amount not greater than zero",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Invalid input data, amount must be greater than zero"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Player not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Player not found"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Internal server error"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/authentication/players/{playerId}/currency/update": {
      "patch": {
        "tags": [
          "Authentication Service"
        ],
        "summary": "Update player wallet balance",
        "description": "Updates the amount of currency in a player's wallet by adding or subtracting a specified amount.",
        "parameters": [
          {
            "name": "playerId",
            "in": "path",
            "required": true,
            "description": "The unique ID of the player whose wallet is being updated.",
            "schema": {
              "type": "integer",
              "example": 1
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "amount": {
                    "type": "integer",
                    "description": "The amount to add or subtract from the wallet. Can be positive or negative.",
                    "example": -50
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Wallet updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Wallet updated successfully"
                    },
                    "new_wallet_balance": {
                      "type": "integer",
                      "description": "The updated balance in the player's wallet.",
                      "example": 150
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data or insufficient funds",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": {
                        "invalidInput": {
                          "value": "Invalid input data amount field is required"
                        },
                        "insufficientFunds": {
                          "value": "Insufficient funds"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Player not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Player not found"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Internal server error"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/authentication/players/{playerId}/currency/subtract": {
      "patch": {
        "tags": [
          "Authentication Service"
        ],
        "summary": "Sottrae valuta dal wallet del giocatore",
        "description": "Sottrae una quantità specificata di monete di gioco dal wallet di un giocatore specifico.",
        "parameters": [
          {
            "name": "playerId",
            "in": "path",
            "description": "ID del giocatore",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "amount": {
                    "type": "number",
                    "format": "float",
                    "description": "Quantità di valuta da sottrarre (deve essere positiva)"
                  }
                },
                "required": [
                  "amount"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Wallet updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Wallet updated successfully"
                    },
                    "new_wallet_balance": {
                      "type": "number",
                      "format": "float",
                      "example": 50
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Insufficient found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Insufficient funds"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Player not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Player not found"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error occurred",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Internal server error occurred"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/gacha_service/players/{userID}/gachas": {
      "get": {
        "tags": [
          "Gacha Service"
        ],
        "summary": "Get player's gacha collection",
        "description": "Retrieves the gacha collection of a specific player based on their unique user ID.",
        "parameters": [
          {
            "name": "userID",
            "in": "path",
            "required": true,
            "description": "The unique ID of the player whose gacha collection is being retrieved.",
            "schema": {
              "type": "integer",
              "example": 1
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Player's gacha collection retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "gachaId": {
                        "type": "integer",
                        "description": "The unique ID of the gacha.",
                        "example": 101
                      },
                      "name": {
                        "type": "string",
                        "description": "The name of the gacha.",
                        "example": "Legendary Pilot"
                      },
                      "rarity": {
                        "type": "string",
                        "description": "The rarity of the gacha.",
                        "example": "SSR"
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Player not found or no gachas available",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Player not found"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Gacha Service"
        ],
        "summary": "Add a gacha to a player's collection",
        "description": "Adds a new gacha to the collection of a specific player identified by their user ID.",
        "parameters": [
          {
            "name": "userID",
            "in": "path",
            "required": true,
            "description": "The unique ID of the player to whom the gacha will be added.",
            "schema": {
              "type": "integer",
              "example": 1
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "gacha_id": {
                    "type": "integer",
                    "description": "The unique ID of the gacha.",
                    "example": 101
                  },
                  "pilot_name": {
                    "type": "string",
                    "description": "The name of the gacha's pilot.",
                    "example": "Legendary Pilot"
                  },
                  "rarity": {
                    "type": "string",
                    "description": "The rarity of the gacha.",
                    "example": "SSR"
                  },
                  "experience": {
                    "type": "integer",
                    "description": "The experience level of the gacha.",
                    "example": 50
                  },
                  "ability": {
                    "type": "string",
                    "description": "The ability of the gacha.",
                    "example": "Stealth Mode"
                  }
                },
                "required": [
                  "gacha_id",
                  "pilot_name",
                  "rarity",
                  "experience",
                  "ability"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Gacha added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Gacha added successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Invalid input data"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/gacha_service/players/{userID}/gachas/{gachaId}": {
      "get": {
        "tags": [
          "Gacha Service"
        ],
        "summary": "Get details of a specific gacha",
        "description": "Retrieves the details of a specific gacha in a player's collection identified by the player ID and gacha ID.",
        "parameters": [
          {
            "name": "userID",
            "in": "path",
            "required": true,
            "description": "The unique ID of the player.",
            "schema": {
              "type": "integer",
              "example": 1
            }
          },
          {
            "name": "gachaId",
            "in": "path",
            "required": true,
            "description": "The unique ID of the gacha.",
            "schema": {
              "type": "integer",
              "example": 101
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Gacha details retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "gachaId": {
                      "type": "integer",
                      "description": "The unique ID of the gacha.",
                      "example": 101
                    },
                    "pilotName": {
                      "type": "string",
                      "description": "The name of the gacha's pilot.",
                      "example": "Legendary Pilot"
                    },
                    "rarity": {
                      "type": "string",
                      "description": "The rarity of the gacha.",
                      "example": "SSR"
                    },
                    "experience": {
                      "type": "integer",
                      "description": "The experience level of the gacha.",
                      "example": 50
                    },
                    "ability": {
                      "type": "string",
                      "description": "The ability of the gacha.",
                      "example": "Stealth Mode"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Gacha or player not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Gacha or player not found"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/gacha_service/players/{userID}/gachas/missing": {
      "get": {
        "tags": [
          "Gacha Service"
        ],
        "summary": "Retrieve the list of gachas missing from a player's collection",
        "description": "Returns the list of gachas that are missing from a player's collection compared to the complete catalog available.",
        "parameters": [
          {
            "name": "userID",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "The ID of the player whose missing gachas are being retrieved."
          }
        ],
        "responses": {
          "200": {
            "description": "List of missing gachas retrieved successfully or player has all gachas.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "gacha_id": {
                            "type": "integer",
                            "description": "Unique identifier for the missing gacha."
                          },
                          "pilot_name": {
                            "type": "string",
                            "description": "Name of the missing pilot."
                          },
                          "rarity": {
                            "type": "string",
                            "description": "Rarity level of the missing pilot."
                          },
                          "experience": {
                            "type": "integer",
                            "description": "Experience level of the missing pilot."
                          },
                          "ability": {
                            "type": "string",
                            "description": "Special ability of the missing pilot."
                          }
                        }
                      }
                    },
                    {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "description": "Message indicating the player has all gachas.",
                          "example": "Player has all gachas."
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal server error occurred.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Internal server error occurred."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/gacha_service/players/{userID}/gachas/{gachaID}/update_owner": {
      "patch": {
        "tags": [
          "Gacha Service"
        ],
        "summary": "Update the ownership of a specific gacha",
        "description": "Updates the ownership of a specific gacha, typically used after a successful auction win to transfer the gacha to a new owner.",
        "parameters": [
          {
            "name": "userID",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "The ID of the new owner (player) to whom the gacha will be assigned."
          },
          {
            "name": "gachaID",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "The ID of the gacha that is being transferred."
          }
        ],
        "responses": {
          "200": {
            "description": "Gacha ownership updated successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "description": "Confirmation message for successful ownership update.",
                      "example": "Gacha ownership updated successfully."
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Gacha not found.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "description": "Error message indicating the gacha was not found.",
                      "example": "Gacha not found."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error occurred.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "description": "Error message for an internal server issue.",
                      "example": "An internal error occurred."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/market_service/players/{userId}/transactions": {
      "get": {
        "tags": [
          "Gacha Market Service"
        ],
        "summary": "Get user transaction history",
        "description": "Retrieves the transaction history for a specific user identified by their user ID.",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "description": "The unique ID of the user whose transactions are being retrieved.",
            "schema": {
              "type": "integer",
              "example": 1
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Transactions retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "integer",
                        "description": "The unique ID of the transaction.",
                        "example": 101
                      },
                      "user_id": {
                        "type": "integer",
                        "description": "The ID of the user who made the transaction.",
                        "example": 1
                      },
                      "amount_spent": {
                        "type": "number",
                        "format": "float",
                        "description": "The amount of money spent in the transaction.",
                        "example": 25.5
                      },
                      "timestamp": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The timestamp of the transaction.",
                        "example": "2024-11-17T10:15:30"
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "No transactions found for this user",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No transactions found for this user"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "An internal error occurred Database connection failed"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/market_service/players/{playerId}/currency/buy": {
      "post": {
        "tags": [
          "Gacha Market Service"
        ],
        "summary": "Purchase in-game currency",
        "description": "Buys in-game currency for a player's wallet. The purchased amount is added to the player's wallet, and a transaction record is created.",
        "parameters": [
          {
            "name": "playerId",
            "in": "path",
            "required": true,
            "description": "The unique ID of the player making the purchase.",
            "schema": {
              "type": "integer",
              "example": 1
            }
          },
          {
            "name": "amount",
            "in": "query",
            "required": true,
            "description": "The amount of currency to purchase. Must be greater than zero.",
            "schema": {
              "type": "number",
              "format": "float",
              "example": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "In-game currency purchased successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "In-game currency purchased successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Invalid input data Amount must be greater than zero"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Player not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Player not found"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error or communication error with the authentication service",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": {
                        "authServiceError": {
                          "value": "An error occurred while communicating with the auth service Timeout error"
                        },
                        "internalError": {
                          "value": "An internal error occurred Database connection failed"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "502": {
            "description": "Failed to add currency due to service error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Failed to add currency"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/market_service/players/{playerId}/gacha/roll": {
      "post": {
        "tags": [
          "Gacha Market Service"
        ],
        "summary": "Purchase a gacha roll",
        "description": "Allows the player to spend in-game currency to purchase a gacha roll and obtain a random pilot. The roll costs a fixed amount of in-game currency.",
        "parameters": [
          {
            "name": "playerId",
            "in": "path",
            "required": true,
            "description": "The unique ID of the player purchasing the roll.",
            "schema": {
              "type": "integer",
              "example": 1
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Roll purchased successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Roll purchased successfully"
                    },
                    "pilot": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "description": "The unique ID of the pilot obtained.",
                          "example": 101
                        },
                        "pilot_name": {
                          "type": "string",
                          "description": "The name of the obtained pilot.",
                          "example": "Legendary Pilot"
                        },
                        "rarity": {
                          "type": "string",
                          "description": "The rarity of the obtained pilot.",
                          "example": "SSR"
                        },
                        "experience": {
                          "type": "integer",
                          "description": "The experience level of the obtained pilot.",
                          "example": 50
                        },
                        "ability": {
                          "type": "string",
                          "description": "The special ability of the obtained pilot.",
                          "example": "Stealth Mode"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Not enough in-game currency to purchase a roll",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Not enough in-game currency to purchase a roll"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Player not found or no pilots available",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": {
                        "playerNotFound": {
                          "value": "Player not found"
                        },
                        "noPilotsAvailable": {
                          "value": "No pilots available"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error or communication error with services",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": {
                        "serviceError": {
                          "value": "An error occurred while communicating with the auth or gacha service Timeout error"
                        },
                        "internalError": {
                          "value": "An internal error occurred Database connection failed"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/market_service/catalog": {
      "get": {
        "tags": [
          "Gacha Market Service"
        ],
        "summary": "Retrieve the complete catalog of pilots (gachas)",
        "description": "Returns the complete catalog of all available pilots (gachas) in the system, including their details such as rarity, experience, and special abilities.",
        "responses": {
          "200": {
            "description": "Catalog retrieved successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "gacha_id": {
                        "type": "integer",
                        "description": "Unique identifier for the gacha."
                      },
                      "pilot_name": {
                        "type": "string",
                        "description": "Name of the pilot."
                      },
                      "rarity": {
                        "type": "string",
                        "description": "Rarity level of the pilot."
                      },
                      "experience": {
                        "type": "integer",
                        "description": "Experience level of the pilot."
                      },
                      "ability": {
                        "type": "string",
                        "description": "Special ability of the pilot."
                      }
                    },
                    "required": [
                      "gacha_id",
                      "pilot_name",
                      "rarity"
                    ]
                  }
                }
              }
            }
          },
          "404": {
            "description": "No pilots available in the catalog.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No pilots available in the catalog."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error occurred.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Internal server error occurred."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auction_service/auctions/active": {
      "get": {
        "tags": [
          "Gacha Auction Service"
        ],
        "summary": "Get active auctions",
        "description": "Retrieves a list of all active auctions currently available.",
        "responses": {
          "200": {
            "description": "Active auctions retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "auction_id": {
                        "type": "integer",
                        "description": "The unique ID of the auction.",
                        "example": 1
                      },
                      "gacha_id": {
                        "type": "integer",
                        "description": "The unique ID of the gacha being auctioned.",
                        "example": 101
                      },
                      "issuer_id": {
                        "type": "integer",
                        "description": "The ID of the user who issued the auction.",
                        "example": 55
                      },
                      "current_bid": {
                        "type": "number",
                        "format": "float",
                        "description": "The current highest bid for the auction.",
                        "example": 150
                      },
                      "start_time": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The timestamp indicating when the auction started.",
                        "example": "2024-11-17T12:00:00Z"
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "No active auctions found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No active auctions found"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "An internal error occurred Database connection failed"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auction_service/players/{userId}/setAuction": {
      "post": {
        "tags": [
          "Gacha Auction Service"
        ],
        "summary": "Create a new auction",
        "description": "Allows a user to auction one of their gacha items. The auction will last for a specified time (default is 1 minute).",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "description": "The unique ID of the user creating the auction.",
            "schema": {
              "type": "integer",
              "example": 1
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "gacha_id": {
                    "type": "integer",
                    "description": "The unique ID of the gacha being auctioned.",
                    "example": 101
                  },
                  "base_price": {
                    "type": "number",
                    "format": "float",
                    "description": "The starting price of the auction.",
                    "example": 50
                  }
                },
                "required": [
                  "gacha_id",
                  "base_price"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Auction created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Auction created successfully"
                    },
                    "auction_id": {
                      "type": "integer",
                      "description": "The unique ID of the newly created auction.",
                      "example": 2001
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Invalid input data"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Gacha not found or not owned by user",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Gacha not found or not owned by user"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error or communication error with gacha service",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": {
                        "serviceError": {
                          "value": "An error occurred while communicating with the gacha service Timeout error"
                        },
                        "internalError": {
                          "value": "An internal error occurred Database connection failed"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auction_service/auctions/{auctionID}/bid": {
      "post": {
        "tags": [
          "Gacha Auction Service"
        ],
        "summary": "Place a bid on an auction",
        "description": "Allows a user to place a bid on a specific auction.",
        "parameters": [
          {
            "name": "auctionID",
            "in": "path",
            "description": "The ID of the auction to place a bid on",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "user_id": {
                    "type": "string",
                    "description": "The ID of the user placing the bid"
                  },
                  "bid_amount": {
                    "type": "number",
                    "format": "float",
                    "description": "The bid amount (must be higher than the current bid)"
                  }
                },
                "required": [
                  "user_id",
                  "bid_amount"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bid placed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Bid placed successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input, auction is not active, insufficient funds, or bid amount is too low",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Bid amount must be higher than the current bid"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Auction not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Auction not found"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error or issues communicating with external services",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "An error occurred while communicating with other services"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}